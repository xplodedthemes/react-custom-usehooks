{"version":3,"file":"index.js","sources":["src/index.js"],"sourcesContent":["import {useEffect, useLayoutEffect, useRef} from \"react\";\n\nexport const usePrevPropsAndState = (props, state) => {\n    const prevPropsAndStateRef = useRef({ props: null, state: null })\n    const prevProps = prevPropsAndStateRef.current.props\n    const prevState = prevPropsAndStateRef.current.state\n\n    useEffect(() => {\n        prevPropsAndStateRef.current = { props, state }\n    })\n\n    return { prevProps, prevState }\n};\n\nexport const useGetSnapshotBeforeUpdate = (cb, props, state) => {\n    // get prev props and state\n    const { prevProps, prevState } = usePrevPropsAndState(props, state)\n\n    const snapshot = useRef(null)\n\n\n    // getSnapshotBeforeUpdate - not run on mount + run on every update\n    const componentJustMounted = useRef(true)\n    useLayoutEffect(() => {\n        if (!componentJustMounted.current) {\n            snapshot.current = cb(prevProps, prevState)\n        }\n        componentJustMounted.current = false\n    })\n\n    // ðŸ‘‡ look here\n    const useComponentDidUpdate = cb => {\n        useEffect(() => {\n            if (!componentJustMounted.current) {\n                cb(prevProps, prevState, snapshot.current)\n            }\n        })\n    }\n    // ðŸ‘‡ look here\n    return useComponentDidUpdate\n};\n"],"names":["useRef","useEffect","useLayoutEffect"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAEY,MAAC,oBAAoB,GAAG,CAAC,KAAK,EAAE,KAAK,KAAK;AACtD,IAAI,MAAM,oBAAoB,GAAGA,YAAM,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,EAAC;AACrE,IAAI,MAAM,SAAS,GAAG,oBAAoB,CAAC,OAAO,CAAC,MAAK;AACxD,IAAI,MAAM,SAAS,GAAG,oBAAoB,CAAC,OAAO,CAAC,MAAK;AACxD;AACA,IAAIC,eAAS,CAAC,MAAM;AACpB,QAAQ,oBAAoB,CAAC,OAAO,GAAG,EAAE,KAAK,EAAE,KAAK,GAAE;AACvD,KAAK,EAAC;AACN;AACA,IAAI,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE;AACnC,EAAE;AACF;AACY,MAAC,0BAA0B,GAAG,CAAC,EAAE,EAAE,KAAK,EAAE,KAAK,KAAK;AAChE;AACA,IAAI,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,GAAG,oBAAoB,CAAC,KAAK,EAAE,KAAK,EAAC;AACvE;AACA,IAAI,MAAM,QAAQ,GAAGD,YAAM,CAAC,IAAI,EAAC;AACjC;AACA;AACA;AACA,IAAI,MAAM,oBAAoB,GAAGA,YAAM,CAAC,IAAI,EAAC;AAC7C,IAAIE,qBAAe,CAAC,MAAM;AAC1B,QAAQ,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE;AAC3C,YAAY,QAAQ,CAAC,OAAO,GAAG,EAAE,CAAC,SAAS,EAAE,SAAS,EAAC;AACvD,SAAS;AACT,QAAQ,oBAAoB,CAAC,OAAO,GAAG,MAAK;AAC5C,KAAK,EAAC;AACN;AACA;AACA,IAAI,MAAM,qBAAqB,GAAG,EAAE,IAAI;AACxC,QAAQD,eAAS,CAAC,MAAM;AACxB,YAAY,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE;AAC/C,gBAAgB,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,QAAQ,CAAC,OAAO,EAAC;AAC1D,aAAa;AACb,SAAS,EAAC;AACV,MAAK;AACL;AACA,IAAI,OAAO,qBAAqB;AAChC;;;;;"}